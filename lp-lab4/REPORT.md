# Отчет по лабораторной работе №4
## по курсу "Логическое программирование"

## Обработка естественного языка

### студент: Ефимов А.В.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В.     |              |               |
| Левинская М.А.    |    7.12.19   |    5-         |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*

Выписать грамматику отдельно .

## Введение

Чаще всего при обработке предложений или слов стоится дерево, которое позволяет получить доступ к любому элементу и найти между ними взаимосвязь. Для его построения в языке пролог есть Definitive Grammar Clauses - препроцессорные макросы, которые расширяются в предикаты, позволяющие последовательно обработать введённый список слов/букв и составить из них деревья.

## Задание

Реализовать морфологический разбор глаголов: {выучил, учила, изучили, обучил, ...}. 
* Корни (уч, ...) , 
* приставки (вы, из, об, ...) — содержатся в файле-словаре приставок, 
* окончания (ил, ила, ило, или) . 
Результат должен содержать сведения о роде и числе. Пример:
```prolog
% Запрос
?- an_morf([“и”, “з”, “у”, “ч”, “и”, “л”, “а"], X). 
% Результат
X=morf(prist(’из’), kor(’уч’), rod(’жен’), chislo(’един’)).
```
## Принцип решения

Созданы две программы, решающие эту проблему — одна работающая с DGC, другая использующая обычные предикаты пролога.
DGC программа запускается через предикат an_morf(+In, -Out), который вызывает правило обработки
```prolog
an_morf(Prefix:Root:Rod:Plurality, In, []),
```
Первый аргумент возвращает результат обработки (оператор ':' нужен для упрощения возвращения данных), второй получает входящие данные, последний возвращает оставшиеся необработанные элементы (в данном случае предикат должен возвращать пустой список). Это правило вызывает последовательно правила, которые обрабатывают приставку, корень и суффикс.

Правило DC имеет формат:
```
Head --> body
```
В данном случае, если у нас выполняется тело (т.е. в результате обработки тело совпадает с разницей списков), то возвращается атом, содержащийся в голове. Оставшаяся часть предиката an_morf\2 нужна в том случае, если число у нас множественное. Тогда в выводе исключается род.

Вторая программа обходится без использования DGC. В ней используется перебор с помощью Append:
```prolog
an_morf(In, Res):-
    append(Prefix, Other, In),
    an_prist(Prefix, PreCombined),
    append(Root, Suffix, Other),
    an_kor(Root, RootCombined),
    an_suff(Suffix, Rod, Plurality),
```
В каждом предикате an_prist\2, an_kor\2, an_suff\2 берется списки соответственно приставок, корней и суффиксов и совершается попытка унифицировать их. В случае успеха они выводятся единственным атомом (или род и число в случае суффикса). 

Второй предикат an_morf\2 возвращает неудачу обработки.

## Результаты

И первая, и вторая программа возращают одинаковые результаты.\
Примеры работы без DCG:
```prolog
?- an_morf(['и', 'з', 'у', 'ч', 'и', 'л', 'а'], Res).
Res = morf(prist(из), kor(уч), rod(жен), chislo(един)).

?- an_morf(['о', 'б', 'х', 'о', 'д', 'и', 'л'], Res).
Res = morf(prist(об), kor(ход), rod(муж), chislo(един)).

?- an_morf(['х', 'о', 'д', 'и', 'л'], Res).
Res = morf(prist(''), kor(ход), rod(муж), chislo(един)).

?- an_morf(['х', 'о', 'д', 'и', 'л', 'и'], Res).
Res = morf(prist(''), kor(ход), chislo(множ)).

?- an_morf(['р','а','с','х', 'о', 'д', 'и', 'л', 'и','с','ь'], Res).
Res = morf(prist(???), kor(???), rod(???), chislo(???)).
```
Пример работы с DCG:
```prolog
?- an_morf(['и', 'з', 'у', 'ч', 'и', 'л', 'а'], Res).
Res = morf(prist(из), kor(уч), rod(жен), chislo(един)).

?- an_morf(['о', 'б', 'х', 'о', 'д', 'и', 'л'], Res).
Res = morf(prist(об), kor(ход), rod(муж), chislo(един)).

?- an_morf(['х', 'о', 'д', 'и', 'л'], Res).
Res = morf(prist(''), kor(ход), rod(муж), chislo(един)).

?- an_morf(['х', 'о', 'д', 'и', 'л', 'и'], Res).
Res = morf(prist(''), kor(ход), chislo(множ)).

?- an_morf(['р','а','з','х', 'о', 'д', 'и', 'л', 'и','с','ь'], Res).
false.
```
## Выводы

Благодаря перебору пролога, задача, которая в остальных языках могла растянуться на 200-300 строк, была сокращена до 60 и менее строк. При этом значительно упрощается решение при использовании встроенных средств грамматического разбора DCG.

Кроме того, отсутствие нужды в написании потока выполнения программы позволяет программисту сконцентрироваться на написании словаря.
